<header class="header">
    <div class="container header-container">
        <div class="header-left">
            <div class="logo">
                {% if system_settings.company_logo %}
                    <img src="{{ system_settings.company_logo.url }}" alt="{{ system_settings.company_name }}" class="logo-img">
                {% endif %}
                <h1>{{ system_settings.company_name }}</h1>
            </div>
        </div>
        
        <div class="header-center">
            <div class="search-bar">
                <input type="text" placeholder="Rechercher une fonctionnalité..." class="search-input" id="globalSearchInput" autocomplete="off">
                <button class="search-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <div class="search-results-dropdown" id="searchResultsDropdown"></div>
            </div>
        </div>
        
        <div class="header-right">
            <!-- Bouton QR Code serveur -->
            <button class="qr-toggle" id="qrToggle" aria-label="Afficher le QR Code serveur" title="QR Code serveur">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="2" width="8" height="8" rx="1"/>
                    <rect x="14" y="2" width="8" height="8" rx="1"/>
                    <rect x="2" y="14" width="8" height="8" rx="1"/>
                    <rect x="14" y="14" width="4" height="4"/>
                    <line x1="22" y1="14" x2="22" y2="14.01"/>
                    <line x1="22" y1="22" x2="22" y2="22.01"/>
                    <line x1="18" y1="22" x2="18" y2="22.01"/>
                    <path d="M5 5h2v2H5zM17 5h2v2h-2zM5 17h2v2H5z"/>
                </svg>
            </button>

            <button class="theme-toggle" id="themeToggle" aria-label="Changer de thème">
                <svg class="sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 1v2m0 18v2M21 12h-2M5 12H3m15.364-7.364l-1.414 1.414M7.05 16.95l-1.414 1.414m12.728 0l-1.414-1.414M7.05 7.05L5.636 5.636" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <svg class="moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div class="user-menu">
                <button class="user-btn" id="userMenuBtn">
                    <div class="user-avatar">
                        <span>{{ user.username|first|upper }}</span>
                    </div>
                    <span class="user-name">{{ user.username }}</span>
                </button>
                <div class="user-dropdown" id="userDropdown">
                    <a href="{% url 'logout' %}" class="user-dropdown-item logout-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        Déconnexion
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
